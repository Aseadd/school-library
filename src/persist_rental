require './src/rentals'
require './src/modules/list'
require 'json'

class PersistRental
    def initialize(rental)
        @rentals = rental
    end
    include List

    def read_rental_data
        rental_data = File.read('./src/rentals.json')
        rental_list = JSON.parse(rental_data)
        rental_list.each_with_index do |rental, index|
          puts "#{index} Date: #{rental['date']} Author: #{retal['author']} Title: #{rental['title']} Name: #{rental['name']}"
        end
    end

    def save_rental_data(id, name, title, author, date)
        rental_info = { id: id, name: name, title: title, author: author, date: date }
        rental_data = File.read('./src/rentals.json')
        rental_list = JSON.parse(rental_data)
        rental_list.push(rental_info)
        File.open('./src/rentals.json', 'w') do |file|
          file.write(@rentals.to_json)
        end
    end


end